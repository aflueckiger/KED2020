---
title: The ABC of computational Text Analysis
subtitle: "04: Introduction into Command-line"
author: "Alex Flückiger"
institute: |
  | Faculty of Humanities and Social Sciences
  | University of Lucerne
date: "19 March 2020"
header-includes: \metroset{progressbar=frametitle,sectionpage=progressbar}
pandoc-latex-unlisted: [unlisted]
lang: en-US
from: markdown+emoji
---





## Action Plan #COVID-19

- interacting through chat + (audio + video)
  - mute mic unless you speak
- slides already online
- weekly live-lectures
- recorded sessions on [SWITCHtube](https://tube.switch.ch/channels/25968add)



Let's resist! :mask:





::: notes

- Generieren Fake News Corona Sitzung 1
- erste Online-Erfahrungen
- Chat + Audio nutzen
  - alle sollten chat öffnen, um fragen zu sehen
- sofort melden bei technischen Problemen
- slides online um dinge zu kopieren
- Live-Lektionen zwecks Interaktion
- evtl. FAQ online verfügbar machen

:::



## Recap last Lecture

- Was the installation successful?
- any questions



::: notes

- Installationsprobleme? up/downvote
- textacy problematisch
- unklare Dinge im Guide?

:::

## Outline

- learn principles of the shell
- perform shell commands



::: notes

- heute Einführung in Shell, nächstes Mal tatsächlich nützliche Dinge
- Commands statt Klicks
- Cockpit bis zu Osterferien
- wichtig für alle Datei-Operationen, egal ob 1 oder Millionen


:::





## Starting a Shell

:::::::::::::: {.columns}

:::{.column width="50%"}

#### macOS

- open `Terminal`
- shell type: zsh

:::

:::{.column width="50%"}

#### Windows

- open `Ubuntu 18.04 LTS`
- shell type: Bash
- ~~open Windows Command Prompt~~

:::

:::::::::::::: 



::: notes

- Studis sollen Bash auch öffnen
- Unix-Befehle übergreifend nutzbar
- Shell zeigen: Erscheinungsbild je System unterschiedlich
- ab macOS Catalina: zsh, früher Bash

:::

## Bourne-again Shell

- offers many built-in apps
- shell prompt
  - `USER@HOSTNAME:~$`
- home directory `~` 
  - refers to `/home/USER`
- case-sensitive
- no feedback



::: notes

- Computersteuerung komplett über CLI möglich
  
  - unnütze Verdoppelung zu GUI?
  - Hunderte oder Tausende von Dateien nicht manuell bearbeitbar
  
- Empfehlung: konsequente Nutzung CLI

  - Vertrauen, Geschwindigkeit
  - Anfang braucht Gewöhnung

  - Vorteilen von beiden nutzen

- no need to memorize syntax

  - slides, google, wiederkehrendes auto-erinnern

- Eigenschaften

  - extremely fast
  - kompakter Code komplexer Prozessierung

:::



## Getting started in a Shell

#### running commands


```bash
command -a --long_argument FILE		# generic components
echo "hello world"					# print a hello
```

#### getting help

```bash
man echo		# get help for any command (e.g., echo)
echo --help		# get help for any command (e.g., echo)
```



::: notes

- CLI: Eingabe + Ausgabe gleiches Fenster
- Tradition von hello world
- quotes to preserve formatting
- Hilfeseiten sehr umfangreich
  - googlen oft schneller --> stackoverflow

:::

## Structure of a File System

:::::::::::::: {.columns}
::: {.column}

  - current directory `.`

- hierarchical file system

  - tree-like

- relative vs. absolute path

  - relative works across systems


:::

::: {.column}

```bash
.
├── data
├── materials
│   └── installation.pdf
├── README.md
└── slides
    ├── images
    │   ├── ai.jpg
    │   └── zotero.png
    ├── KED2020_01.html
    ├── KED2020_01.md
    ├── KED2020_02.html
    └── KED2020_02.md
```

:::

::::::::::::::



::: notes

- verschachtelte Struktur
  - Auffächerung wie Aktenschrank mit Ordner
- Baum, nicht Netzwerk
  - klassisch: Objekt genau an einer Position
- Ordner / Dateien --> Endungen
  - keine technische Notwendigkeit



- Whiteboard file structure

:::





## Navigating in a File System

#### list content

```bash
pwd 				# show absolute path to current directory

ls 					# list content of current directory
ls -lh				# list with more information
ls dirname			# list content of directory dirname

cd ..				# change directory to go folder up
cd dir/subdir		# go to folder dir/subdir (two folders down)
```

#### open in a window 

```bash
open . 		# open path in finder (macOS)
nautilus .	# same for Ubuntu (Windows)
```



::: notes

- befehle sind abkürzungen 
  - cd = change directory
- diskutieren von ls output
  - Berechtigung/Eigentümer/Grösse/Mod.-datum/Name
  - d für directory
- beliebige Verzeichnisse springen
  - oberstes Verzeichnis: C: oder /
  - cd zurück ins home

:::



## Reading/Modifying Files



```bash
more text.txt			# print content (space to scroll)

head text.txt			# print first 10 lines of file		
tail -5 text.txt		# print last 5 lines of file

xdg-open text.txt		# open file in default application
```



## Useful Key Actions

- autocompletion: *tab*
- get last command: &uparrow; 
- scrolling: *space*
- quit: *q* OR *CTRL + C*



::: notes

- lange Dateinamen, Programme nur halb erinnert
- q bspw. in Hilfe

:::



## Creating, Moving, and Copying Files

```bash
touch test.txt		# create a new file
mkdir data			# make a new directory

cp test.txt /other/.			
mv test.txt /other/new_name.txt	# move or rename a file
```



::: notes

- touch abängig ob Datei existiert
- mkdir -p

:::

## Removing Files{data-background=#b5533c}

Watch out, there is no way back: No recycle bin.

```bash
rm old.txt 			# remove a file
rm -r old_data		# remove a folder with all its files
```



## Wildcards

- a single character: `?` 
- any sequence of characters: `*`

```bash
mv data/*.txt new_data/.	# move txt-files from to other subfolder
cp *.txt	files/.			# copy all txt-files in a single folder
```



::: notes

- batch operation
- ls KED2020_0?.html

:::



## Searching

#### Collect Files

```bash
ls *.txt 		# list all files with the suffix .txt
ls */*.txt		# list all txt-files in any subfolder
```

#### Find Files

```bash
find /path/to/dir -name "filename"	# find a file in specific directory
locate -i pattern_1 pattern_2		# global search of files/folders
grep -r	'pattern'					# find files containing pattern 
```

::: notes

- grep ist mächtig, häufig brauchen
- grep nur für rohe Textformate (txt, html, csv etc.)
- arg -i case-insensitiveness

:::

## Expansion

batch processing with expansion

```bash
touch text_{a..c}.txt	
# equivalent to: 
touch text_a.txt text_b.txt text_c.txt

mkdir {2000..2005}{a..c}
# equivalent to: 
mkdir 2000a 2000b 2000c 2001a 2001b 2000c
```



::: notes

- hilfreich um Dateien zu ordnen

:::



## Redirect Output

stream to...

- ... other program: `I` (pipe)
- ... redirect into file (overwrite): `>`
- ... recdirect into file (append): `>>`



::: notes

- check output first, then overwrite file as a second step

:::

## Merging Files

```bash
cat part_1.txt part_2.txt		# concatenate multiple files
cat *.txt > all_text.txt 		# merge all txt-files into a single one
```



## Git

#### get an initial copy of the course material

```bash
git clone https://github.com/aflueckiger/KED2020.git
```

#### update your local copy

```bash
cd KED2020
git pull
```



## Scripting

- all commands in single script
  - one command per row
- start script with Shebang
  - `#!/bin/sh`
- execute with
  - `bash scriptname`

```bash
#!/bin/sh

# example script located at: scripts/find_all_pdf.sh
echo "This is a list of all PDFs on my computer:"
locate -i /home/*.pdf
```



::: notes

- Automation = Ablauf von Instruktionen
- Vorteil: nicht nötig Befehlsabfolge zu merken
- Übung ebenfalls als Skript abgeben

:::



## Conventions

- no spaces/umlauts in names
  - alphanumeric, underscore, hyphen, dot
- files have a suffix, folders not
  - `text_1.txt` vs. `texts`
- separate data from scripts
- never change the raw data
- descriptive file organization
  - `SOURCE/YEAR/speech_party_X.txt`



::: notes

- Konventionen helfen Fehler vermindern, Verständnis verbessern

:::



# Questions

## Assignment #1

- get/submit via OLAT
  - starting tonight
  - deadline: 26 March 2020, 23:59
- ask friends for support, not solutions



::: notes

- kleine Übung
- Vertrauen entwickeln
- nicht bis zu Schluss warten

:::



## In-class: Exercises I{data-background=#3c70b5}

1. If you have not cloned the course repository from Github, do this now.

2. Create a new directory called `tmp` in the course directory `KED2020`.

3. Look up the `touch` program. The `man` program is your friend.

4. Use `touch` to create a new file called `advice_for_programmers.txt` in `tmp`.

5. Write the following content into that file, one line at a time using operators:    

   ```bash
   How about making programming a little more accessible? Like:
   from human_knowledge import solution
   ```

5. Make sure that the content was written into that file with `more`.

## In-class: Exercises II{data-background=#3c70b5}

1. Navigate up and down in in your filesystem using `cd` and list the respective files per directory with `ls`. Where can you find your personal documents? Print the absolute path with `pwd`.  
   Hinting Windows users as they are working in a Ubuntu subsystem, check out: `/mnt/c/Users` 
2. Read `man ls` and write an `ls` command that lists your documents ordered

   * by recency (time) 
   * by size
3. Use the `|` and `>` operators to write the 3 “last modified” files in your documents folder into a file called `last-modified.txt` on your desktop (desktop is also a directory). It is a single command performing multiple operations, one after another.



## Additional Resources

When you look for useful primers on Bash, consider the following resources:

- [The Programming Historian](https://programminghistorian.org/en/lessons/intro-to-bash)
- [DigitalOcean](https://www.digitalocean.com/community/tutorials/an-introduction-to-the-linux-terminal) 